define(["dojo/dom","app/util/geo","dojo/topic","dojo/cookie","dojo/domReady!"],function(e,t,n,r){var i={max:{name:65,purpose:560},location:!1,init:function(){this.show()},show:function(){var e=this;console.log("showing app");var i=!1;r("location")&&r("location").length&&(i=!0);if(i){e.location=r("location");e.updateLocation(e.location)}else t.setLocation();$("[rel=tooltip]").tooltip({placement:"bottom",trigger:"hover"});$("#addName").keyup(function(){e.validate()?$("#addShare").addClass("btn-primary").attr("disabled",!1):$("#addShare").removeClass("btn-primary").attr("disabled","disabled")});$("#addPurpose").keyup(function(){e.validate()?$("#addShare").addClass("btn-primary").attr("disabled",!1):$("#addShare").removeClass("btn-primary").attr("disabled","disabled")});$("#addIdeaModal").on("shown",function(){$("#addName").focus()});$("#addIdeaModal").on("hidden",function(){$("#addName").val("");$("#addPurpose").val("");$("#addNameCount").text(e.max.name.toString());$("#addPurposeCount").text(e.max.purpose.toString())});$("#resetLocation").click(function(){console.log("resetting location");t.setLocation()});n.subscribe("updateLocation",function(t){e.updateLocation(t)})},updateLocation:function(e){var t=this;if(e){t.location=e;r("location",e);$("#addLocationBtn").removeClass("hide");$("#addLocation").text(e)}else $("#addLocationBtn").addClass("hide")},validate:function(){var t=t,n=!1,r=!1,i=!1,s=this.max.name,o=this.max.purpose,u=e.byId("addName").value,a=e.byId("addPurpose").value,f=s-u.length,l=o-a.length;$("#addNameCount").text(f.toString());$("#addPurposeCount").text(l.toString());if(f<0){$("#addNameCount").addClass("text-error");$("#addNameCount").removeClass("muted")}else{$("#addNameCount").removeClass("text-error");$("#addNameCount").addClass("muted");r=!0}if(l<0){$("#addPurposeCount").addClass("text-error");$("#addPurposeCount").removeClass("muted")}else{$("#addPurposeCount").removeClass("text-error");$("#addPurposeCount").addClass("muted");i=!0}u.length&&a.length&&r&&i&&(n=!0);return n}};return i});